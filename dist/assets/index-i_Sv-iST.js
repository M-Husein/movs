import{l as e,$ as a,j as t,m as i,L as s,o as n,p as l,s as o}from"./index-TmnghoQM.js";import{g as r,S as d,N as p,a as m,B as u,d as c,C as g,L as y}from"./CommonSlider-T5FavU4A.js";import{u as x,S as h}from"./CardMedia-d3s5zU2x.js";function v(e){let a,t,{swiper:i,extendParams:s,on:n,emit:l,params:o}=e;i.autoplay={running:!1,paused:!1,timeLeft:0},s({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let d,p,m,u,c,g,y,x,h=o&&o.autoplay?o.autoplay.delay:3e3,v=o&&o.autoplay?o.autoplay.delay:3e3,b=(new Date).getTime();function j(e){i&&!i.destroyed&&i.wrapperEl&&e.target===i.wrapperEl&&(i.wrapperEl.removeEventListener("transitionend",j),x||_())}const f=()=>{if(i.destroyed||!i.autoplay.running)return;i.autoplay.paused?p=!0:p&&(v=d,p=!1);const e=i.autoplay.paused?d:b+v-(new Date).getTime();i.autoplay.timeLeft=e,l("autoplayTimeLeft",e,e/h),t=requestAnimationFrame((()=>{f()}))},w=e=>{if(i.destroyed||!i.autoplay.running)return;cancelAnimationFrame(t),f();let s=void 0===e?i.params.autoplay.delay:e;h=i.params.autoplay.delay,v=i.params.autoplay.delay;const n=(()=>{let e;if(e=i.virtual&&i.params.virtual.enabled?i.slides.filter((e=>e.classList.contains("swiper-slide-active")))[0]:i.slides[i.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(n)&&n>0&&void 0===e&&(s=n,h=n,v=n),d=s;const o=i.params.speed,r=()=>{i&&!i.destroyed&&(i.params.autoplay.reverseDirection?!i.isBeginning||i.params.loop||i.params.rewind?(i.slidePrev(o,!0,!0),l("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(i.slides.length-1,o,!0,!0),l("autoplay")):!i.isEnd||i.params.loop||i.params.rewind?(i.slideNext(o,!0,!0),l("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(0,o,!0,!0),l("autoplay")),i.params.cssMode&&(b=(new Date).getTime(),requestAnimationFrame((()=>{w()}))))};return s>0?(clearTimeout(a),a=setTimeout((()=>{r()}),s)):requestAnimationFrame((()=>{r()})),s},N=()=>{b=(new Date).getTime(),i.autoplay.running=!0,w(),l("autoplayStart")},L=()=>{i.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(t),l("autoplayStop")},T=(e,t)=>{if(i.destroyed||!i.autoplay.running)return;clearTimeout(a),e||(y=!0);const s=()=>{l("autoplayPause"),i.params.autoplay.waitForTransition?i.wrapperEl.addEventListener("transitionend",j):_()};if(i.autoplay.paused=!0,t)return g&&(d=i.params.autoplay.delay),g=!1,void s();const n=d||i.params.autoplay.delay;d=n-((new Date).getTime()-b),i.isEnd&&d<0&&!i.params.loop||(d<0&&(d=0),s())},_=()=>{i.isEnd&&d<0&&!i.params.loop||i.destroyed||!i.autoplay.running||(b=(new Date).getTime(),y?(y=!1,w(d)):w(),i.autoplay.paused=!1,l("autoplayResume"))},E=()=>{if(i.destroyed||!i.autoplay.running)return;const e=r();"hidden"===e.visibilityState&&(y=!0,T(!0)),"visible"===e.visibilityState&&_()},O=e=>{"mouse"===e.pointerType&&(y=!0,x=!0,i.animating||i.autoplay.paused||T(!0))},S=e=>{"mouse"===e.pointerType&&(x=!1,i.autoplay.paused&&_())};n("init",(()=>{i.params.autoplay.enabled&&(i.params.autoplay.pauseOnMouseEnter&&(i.el.addEventListener("pointerenter",O),i.el.addEventListener("pointerleave",S)),r().addEventListener("visibilitychange",E),N())})),n("destroy",(()=>{i.el.removeEventListener("pointerenter",O),i.el.removeEventListener("pointerleave",S),r().removeEventListener("visibilitychange",E),i.autoplay.running&&L()})),n("_freeModeStaticRelease",(()=>{(u||y)&&_()})),n("_freeModeNoMomentumRelease",(()=>{i.params.autoplay.disableOnInteraction?L():T(!0,!0)})),n("beforeTransitionStart",((e,a,t)=>{!i.destroyed&&i.autoplay.running&&(t||!i.params.autoplay.disableOnInteraction?T(!0,!0):L())})),n("sliderFirstMove",(()=>{!i.destroyed&&i.autoplay.running&&(i.params.autoplay.disableOnInteraction?L():(m=!0,u=!1,y=!1,c=setTimeout((()=>{y=!0,u=!0,T(!0)}),200)))})),n("touchEnd",(()=>{if(!i.destroyed&&i.autoplay.running&&m){if(clearTimeout(c),clearTimeout(a),i.params.autoplay.disableOnInteraction)return u=!1,void(m=!1);u&&i.params.cssMode&&_(),u=!1,m=!1}})),n("slideChange",(()=>{!i.destroyed&&i.autoplay.running&&(g=!0)})),Object.assign(i.autoplay,{start:N,stop:L,pause:T,resume:_})}function b(){const r=e()(),{data:b,joinGenre:j}=x(),{data:f,isLoading:w,isFetching:N,isRefetching:L}=a({queryOptions:{retry:!1,enabled:!!b},pagination:{mode:"off"},resource:"movie/now_playing",meta:{params:{language:r}}}),{data:T,isLoading:_,isFetching:E,isRefetching:O}=a({queryOptions:{retry:!1,enabled:!!b},pagination:{mode:"off"},resource:"movie/now_playing",meta:{params:{language:r}}}),{data:S,isLoading:I,isFetching:F,isRefetching:M}=a({queryOptions:{retry:!1,enabled:!!b},pagination:{mode:"off"},resource:"movie/popular",meta:{params:{language:r}}}),{data:R,isLoading:z,isFetching:D,isRefetching:k}=a({queryOptions:{retry:!1,enabled:!!b},pagination:{mode:"off"},resource:"movie/top_rated",meta:{params:{language:r}}}),q=w||N||L,A=_||E||O,P=e=>{e.target.classList.remove("bg-slate-300")};return t.jsx("div",{className:"max-w-screen-xl mx-auto py-4 lg_px-5",children:t.jsxs(i,{container:!0,spacing:4,children:[t.jsxs(i,{item:!0,lg:9,xs:12,children:[t.jsx("div",{className:"relative aspect-video mb-8",children:q?t.jsx("div",{className:"aspect-video bg-slate-300 lg_rounded-lg"}):t.jsx(d,{loop:!0,navigation:!0,centeredSlides:!0,autoplay:{delay:7e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},modules:[p,v],style:{"--swiper-navigation-size":"30px","--swiper-navigation-top-offset":"43%"},className:"aspect-video lg_rounded-lg",children:((null==f?void 0:f.results)||[]).map((e=>t.jsx(m,{children:t.jsxs("article",{className:"relative w-full h-full bg-dark-bottom",children:[t.jsx(s,{to:"/movie/"+e.id,className:"link-drop",children:t.jsx("img",{loading:"lazy",decoding:"async",alt:e.title||e.original_title,src:"https://image.tmdb.org/t/p/original"+e.backdrop_path,className:"block text-0 w-full h-full object-cover aspect-video bg-slate-300",onLoad:P})}),t.jsxs("div",{className:"flex items-end justify-end absolute bottom-0 left-0 right-0 p-4 bg-dark-bottom pointer-events-none",children:[t.jsxs("div",{className:"flex-none mr-4 pointer-events-auto relative max-md_hidden",children:[t.jsx("img",{width:135,height:202,loading:"lazy",decoding:"async",alt:e.title||e.original_title,src:"https://image.tmdb.org/t/p/w500"+e.poster_path,className:"bg-slate-300 block text-0 object-cover shadow-lg rounded-lg border-2 border-gray-100",onLoad:P}),t.jsx(u,{data:e,size:"small",sx:{minWidth:32,width:32,position:"absolute",top:9,right:9,zIndex:1,borderRadius:"50%"}})]}),t.jsxs("div",{className:"grow text-left flex items-center text-white",children:[t.jsx(c,{sx:{fontSize:82},className:"homePlayIcon"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("div",{className:"lg_text-2xl text-xl",children:e.title||e.original_title}),t.jsx("div",{className:"text-gray-300 lg_text-lg mt-2",children:"Watch the Trailer"})]})]})]})]})},e.id)))})}),t.jsx(g,{title:"Popular",loading:I||F||M,data:null==S?void 0:S.results,joinGenre:j}),t.jsx(g,{title:"Top Rated",loading:z||D||k,data:null==R?void 0:R.results,joinGenre:j})]}),t.jsx(i,{item:!0,lg:3,xs:12,component:"aside",children:t.jsxs("div",{className:"max-md_px-4",children:[t.jsx("h2",{className:"text-xl",children:"Upcoming Movies"}),t.jsx(n,{children:A?[1,2,3].map((e=>t.jsxs(y,{alignItems:"flex-start",sx:{padding:0},children:[t.jsx(l,{children:t.jsx(h,{variant:"rectangular",width:72,height:108,className:"rounded-lg"})}),t.jsxs("div",{className:"pl-3 w-full",children:[t.jsx(h,{}),t.jsx(h,{width:"60%"})]})]},e))):((null==T?void 0:T.results)||[]).map((e=>t.jsxs(y,{alignItems:"flex-start",sx:{padding:0},children:[t.jsxs(l,{className:"relative",children:[t.jsx(s,{to:"/movie/"+e.id,children:t.jsx("img",{alt:e.title||e.original_title,width:72,height:108,loading:"lazy",decoding:"async",src:"https://image.tmdb.org/t/p/original"+e.poster_path,className:"bg-slate-300 object-cover rounded-lg block text-0",onLoad:P})}),t.jsx(u,{data:e,size:"small",sx:{minWidth:32,width:32,borderRadius:"50%",position:"absolute",top:0,right:0,zIndex:1}})]}),t.jsx(o,{className:"pl-3",primary:t.jsx(s,{to:"/movie/"+e.id,className:"no-underline body-color",title:e.title||e.original_title,children:e.title||e.original_title}),secondary:t.jsx("span",{className:"text-xs mt-1",children:j(e.genre_ids)})})]},e.id)))})]})})]})})}export{b as default};
