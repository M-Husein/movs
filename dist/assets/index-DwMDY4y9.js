import{a6 as e,aa as r,W as s,a7 as a,k as t,j as n,m as i,a as o,L as l,c,ab as u,b as d,ac as f,A as h,ad as m,ae as x,af as v,ag as b,a9 as p}from"./index-DPNEyMe_.js";import{u as j,C as g,S as y}from"./CardMedia-BK_RKBPZ.js";function w(s,a,t){return function(r,s,a){var t,n;"function"==typeof r?(t=s||[],n=a):(t=[],n=s);var i=e.useRef({hasResult:!1,result:n,error:null}),o=e.useReducer((function(e){return e+1}),0);o[0];var l=o[1],c=e.useMemo((function(){var e="function"==typeof r?r():r;if(!e||"function"!=typeof e.subscribe)throw r===e?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&"undefined"!=typeof window&&("function"!=typeof e.hasValue||e.hasValue()))if("function"==typeof e.getValue)i.current.result=e.getValue(),i.current.hasResult=!0;else{var s=e.subscribe((function(e){i.current.result=e,i.current.hasResult=!0}));"function"==typeof s?s():s.unsubscribe()}return e}),t);if(e.useDebugValue(i.current.result),e.useEffect((function(){var e=c.subscribe((function(e){var r=i.current;null===r.error&&r.result===e||(r.error=null,r.result=e,r.hasResult=!0,l())}),(function(e){var r=i.current;r.error!==e&&(r.error=e,l())}));return"function"==typeof e?e:e.unsubscribe.bind(e)}),t),i.current.error)throw i.current.error;return i.current.result}((function(){return r(s)}),a||[],t)}var R={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function N(){const e="Favorites";s(e+" â€¢ "+R.VITE_APP_NAME);const{data:r}=a(),{isLoading:N,isFetching:E,isRefetching:C,joinGenre:V}=j(),[A,_]=t.useState(),k=w((async()=>await p.favorites.where("userId").equals(r.id).toArray())),I=()=>{_(null)};return n.jsxs("div",{className:"max-w-screen-xl mx-auto p-4 lg_px-5",children:[n.jsx("h1",{className:"text-2xl",children:e}),(null==k?void 0:k.length)?n.jsx(i,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:k.map((e=>n.jsx(i,{item:!0,xs:2,sm:4,md:3,component:"article",children:n.jsxs(o,{className:"h-full flex flex-col relative",children:[n.jsx(l,{to:"/movie/"+e.movieId,className:"no-underline",children:n.jsx(g,{component:"img",alt:e.title,loading:"lazy",decoding:"async",image:"https://image.tmdb.org/t/p/w500"+e.backdrop_path,className:"aspect-video bg-slate-300",onLoad:e=>e.target.classList.remove("bg-slate-300")})}),n.jsx(c,{onClick:()=>_(e),color:"error",variant:"contained",size:"small",title:"Remove",sx:{minWidth:32,width:32,position:"absolute",top:9,right:9,zIndex:1,borderRadius:"50%"},children:n.jsx(u,{})}),n.jsx(d,{className:"h-full flex flex-col",children:n.jsx("h1",{className:"text-base line-clamp-2 body-color mb-0",children:n.jsx(l,{to:"/movie/"+e.movieId,className:"no-underline body-color",title:e.title,children:e.title})})}),n.jsx(f,{sx:{paddingTop:0},children:N||E||C?n.jsx(y,{width:"60%"}):n.jsx("div",{className:"text-xs",children:V(e.genre_ids)})})]})},e.id)))}):n.jsxs(h,{severity:"info",children:[n.jsx(m,{sx:{fontWeight:700},children:"No data"}),"You don't have a favorite, please add your favorite movie."]}),n.jsxs(x,{open:!!A,onClose:I,"aria-labelledby":"confirm-title",children:[n.jsx(v,{id:"confirm-title",children:"Are you sure to remove this data?"}),n.jsxs(b,{children:[n.jsx(c,{onClick:I,children:"Cancel"}),n.jsx(c,{onClick:async()=>{await p.favorites.where("id").equals(A.id).delete(),I()},autoFocus:!0,children:"Yes"})]})]})]})}export{N as default};
